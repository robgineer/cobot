<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Robert Harbach / Thao Dang" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Planner Evaluation - Cobot Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Planner Evaluation";
        var mkdocs_page_input_path = "planner_evaluation.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Cobot Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Graphical User Interfaces</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../gui_overview/">VNC vs Xpra</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../howToVNC/">VNC</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../howToXpra/">Xpra</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cobot_model_overview/">Cobot Model Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cobot_configuration/">MoveIt2 and ROS2 Control Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../launch_files/">Launch Files Explained</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Controls</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cobot_trajectory_controller/">Trajectory Controller</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cobot_hardware/">Hardware Interface</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../controller_manager/">Controller Manager</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Evaluation and Calibration</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Planner Evaluation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#evaluation-setup">Evaluation Setup</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#results">Results</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../offline_hand_eye/">Hand-eye-calibration</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Cobot Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Evaluation and Calibration</li>
      <li class="breadcrumb-item active">Planner Evaluation</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/robgineer/cobot/edit/master/docs/planner_evaluation.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="planner-evaluation">Planner Evaluation<a class="headerlink" href="#planner-evaluation" title="Permanent link">&para;</a></h1>
<p>We have evaluated several planners for their applicability with the Cobot.</p>
<ul>
<li><code>RRTConnect</code>: the default choice in MoveIt2; fast and reliable. Creates two Rapidly-exploring Random Trees (RRTs) - one from the start, one from the goal â€” and tries to connect them.</li>
<li><code>SBL</code>: Single-query Bi-directional Lazy planner. Plans (lazy) without collision checking validates after the path was found.</li>
<li><code>LBKPIECE</code>: Uses projection evaluation (joint dimension reduction, refer <a href="https://ompl.kavrakilab.org/projections.html">this page</a> for more details). OMPL config: <code>projection_evaluator</code>.</li>
<li><code>AnyPathShortening</code>: a (meta) planner that runs several planners in parallel.</li>
</ul>
<p>Although <code>AnyPathShortening</code> seems like a good approach, it is slower than a single planner and although we defined 6 different planners, observations revealed that in most cases only <code>SBL</code>, <code>LBKPIECE</code> or <code>RRTConnect</code> were used by <code>AnyPathShortening</code>.</p>
<p>A comparison further revealed that <code>SBL</code> yields the best results in our operation domain (the small table attached to the Cobot in direction x+).</p>
<h2 id="evaluation-setup">Evaluation Setup<a class="headerlink" href="#evaluation-setup" title="Permanent link">&para;</a></h2>
<p>We have defined a bounding box (representing the operation domain) around the work bench and filled the bound box with points; using a resolution of <code>kDelta = 0.05  # 5 [cm]</code>.</p>
<pre><code>kXMin, kXMax = 0.3, 0.65
kYMin, kYMax = -0.3, 0.1
kZMin, kZMax = 0.5, 1.0
</code></pre>
<p>Point Cloud image of workbench:</p>
<p><img alt="operation_domain" src="../img/operation_domain.png" /></p>
<p>For each (randomly selected) point in the bounding box, we ran the  <code>SBL</code>, <code>LIBPIECE</code> and <code>RRTConnect</code> planner using the <code>ik_reachable_set</code> script; that plans a path with inverse kinematic (IK) and displays successful and failed runs.
Each planner had a timeout of <code>0.5</code> seconds. </p>
<p>Goal was to identify on how many points can be approach by the Cobot from above (for a pick and place task for example). We made sure that an IK solution was not just successful because point were located next to each other by selecting points from the bounding box randomly.</p>
<p>Example (green: successful IK runs, red: failed IK runs)</p>
<p><img alt="search_footballs" src="../img/search_footballs.gif" /></p>
<h2 id="results">Results<a class="headerlink" href="#results" title="Permanent link">&para;</a></h2>
<p>The final "point cloud" for the <code>SBL</code> planner is shown in the following.</p>
<p><img alt="ik_point_cloud" src="../img/ik_point_cloud.png" /></p>
<p>We can see that most points are accessible and the missing points are located at the edges of the bounding box and result from physical limitations (some are out of reach of the Cobot). Example: even with joint 3 and 4 extracted, the configuration with the longest reach of the cobot, the points in the right corner imply difficulties to approach from above.</p>
<p><img alt="ik_point_cloud_reach" src="../img/ik_point_cloud_reach.png" /></p>
<p>Projecting the points on the workbench shows that the reach is acceptable.</p>
<p><img alt="ik_point_cloud_workbench" src="../img/ik_point_cloud_workbench.png" /></p>
<p>While all three planners yield similar results, <code>SBL</code> seemed to have found more solutions overall.</p>
<p>A (visual) comparison of successful and failed IK runs for <code>SBL</code> and <code>RRTConnect</code> (representing the default planner) is shown in the following.
<img alt="rrtconnect_vs_sbl" src="../img/rrtconnect_vs_sbl.png" /></p>
<p>An comparison of the points that were only found by <code>SBL</code> or <code>RRTConnect</code> yields that these belong to the left corner, an areal difficult to reach due to the physical characteristics of the Cobot.</p>
<p><img alt="missing_points_ik" src="../img/missing_points_ik.png" /></p>
<p>=&gt; Selecting <code>SBL</code> due to the fact, that it found more solutions for the corners.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../controller_manager/" class="btn btn-neutral float-left" title="Controller Manager"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../offline_hand_eye/" class="btn btn-neutral float-right" title="Hand-eye-calibration">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Authors <a href="https://github.com/robgineer"> Robert Harbach </a> / <a href="https://github.com/td-code"> Thao Dang </a></p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/robgineer/cobot" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../controller_manager/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../offline_hand_eye/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
